// This file is generated by holgen. Do not modify manually.
#include "DeferredDeleter.h"

namespace holgen_blackbox_csharp {
DeferredDeleter::DeferredDeleter(const std::function<void(void *)> &func) :
    mFunc(func) {
}

void DeferredDeleter::Perform(void *rawPtr) {
  constexpr size_t ObjectOffset = sizeof(DeferredDeleter) + (sizeof(DeferredDeleter)%8);
  DeferredDeleter* ptr = static_cast<DeferredDeleter *>(rawPtr);
  ptr->mFunc(reinterpret_cast<char*>(ptr) + ObjectOffset);
  ptr->~DeferredDeleter();
  delete[] reinterpret_cast<char *>(rawPtr);
}
}
extern "C" {
  void holgen_blackbox_csharp_DeferredDeleter_Perform(void *rawPtr) {
    holgen_blackbox_csharp::DeferredDeleter::Perform(rawPtr);
  }
}
